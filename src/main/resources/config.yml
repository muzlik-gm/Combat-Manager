# ========================================
# True Combat Manager Configuration v2.0
# ========================================
# DO NOT EDIT THE CONFIG VERSION LINE BELOW
config-version: 2

# ========================================
# GENERAL SETTINGS
# ========================================
general:
  # Enable/disable the entire plugin
  # true = Plugin active | false = Plugin disabled
  enabled: true
  
  # Enable debug mode for detailed console logging
  # true = Verbose logging | false = Normal logging
  debug-mode: false
  
  # Language for messages (currently only 'en' supported)
  language: "en"

# ========================================
# LOGGING SETTINGS
# ========================================
logging:
  # Enable/disable console logging for combat events
  # When disabled, only errors will be logged to console
  # Use /combat logging <enabled|disabled> to toggle in-game
  # true = Log combat events to console | false = Silent mode (only errors)
  console-enabled: false
  
  # What to log when console-enabled is true:
  # - Combat start/end events
  # - Damage dealt/received
  # - Newbie protection checks
  # - Restriction blocks (trident, ender pearl, etc.)
  # - Command blocks
  # - Safezone interactions

# Commands Configuration
commands:
  # Enable/disable specific commands
  enabled:
    status: true
    summary: true
    toggle-style: true
    inspect: true
    reload: true
    debug: true

  # Permission requirements
  permissions:
    status: "pvpcombat.command.status"
    summary: "pvpcombat.command.summary"
    toggle-style: "pvpcombat.command.toggle-style"
    inspect: "pvpcombat.admin.inspect"
    reload: "pvpcombat.admin"
    debug: "pvpcombat.admin.debug"

  # Admin features
  admin:
    # GUI update interval (seconds)
    gui-update-interval: 5
    # Debug verbosity levels (LOW, MEDIUM, HIGH)
    debug-verbosity: "MEDIUM"
    # Enable real-time monitoring
    real-time-monitoring: true
    # Maximum admin inspection range (blocks, 0 = unlimited)
    inspection-range: 50

# ========================================
# COMBAT SETTINGS
# ========================================
combat:
  # How long combat lasts after last hit (seconds)
  # Higher = Longer combat timer | Lower = Shorter combat timer
  duration: 30
  
  # Cooldown after combat ends before restrictions are lifted (seconds)
  # Higher = Longer cooldown | Lower = Shorter cooldown
  cooldown: 10
  
  # Maximum concurrent combat sessions (0 = unlimited)
  # Higher = More sessions allowed | 0 = No limit
  max-sessions: 100

  # Damage settings
  damage:
    # Reset combat timer when damage is dealt/received
    # true = Timer resets on damage | false = Timer doesn't reset
    reset-on-damage: true
    
    # Minimum damage required to start combat
    # Higher = Harder to trigger combat | Lower = Easier to trigger
    min-damage-trigger: 0.5

  # BossBar timer display settings
  bossbar:
    # Show BossBar timer during combat
    # true = Show timer | false = Hide timer
    enabled: true
    
    # How often to update the BossBar (seconds)
    update-interval: 1
    
    # BossBar title format ({time_left} = remaining seconds)
    title: "&cCombat: &f{time_left}s"
    
    # BossBar color (RED, BLUE, GREEN, YELLOW, PINK, PURPLE, WHITE)
    color: "RED"
    
    # BossBar style (SOLID, SEGMENTED_6, SEGMENTED_10, SEGMENTED_12, SEGMENTED_20)
    style: "SOLID"

# ========================================
# NEWBIE PROTECTION
# ========================================
newbie-protection:
  # Protect new players who don't have armor
  # true = Protection enabled | false = No protection
  enabled: true
  
  # Prevent newbies from dealing damage to others
  # true = Newbies can't hurt others | false = Newbies can hurt others
  prevent-damage-dealing: true
  
  # Prevent newbies from receiving damage from others
  # true = Newbies can't be hurt | false = Newbies can be hurt
  prevent-damage-receiving: true
  
  # XP level threshold - players above this level lose protection even without armor
  # Higher = More protection | 0 = Only armor matters
  xp-level-threshold: 3
  
  # Check if player has ANY armor piece equipped
  # true = Must have at least 1 armor piece | false = Must have full armor
  require-any-armor: true
  
  # Message sent to newbie when they try to attack
  newbie-attack-message: "&cYou need armor to attack other players!"
  
  # Message sent to attacker when they try to attack a newbie
  attacking-newbie-message: "&cYou cannot attack players without armor!"
  
  # Bypass permission (players with this can ignore newbie protection)
  bypass-permission: "pvpcombat.bypass.newbie"

# ========================================
# COMBAT RESTRICTIONS
# ========================================
# Each restriction can be enabled/disabled independently
restrictions:
   # ========================================
   # ENDER PEARL RESTRICTIONS
   # ========================================
   enderpearl:
     # Enable ender pearl restrictions
     # true = Restrictions active | false = No restrictions
     enabled: true
     
     # Cooldown after throwing an ender pearl (seconds)
     # Higher = Longer cooldown | Lower = Shorter cooldown
     cooldown: 10
     
     # Apply cooldown even when NOT in combat
     # true = Always has cooldown | false = Only cooldown in combat
     cooldown-outside-combat: false
     
     # Multiply cooldown when in combat
     # Higher = Longer combat cooldown | 1.0 = Same as base cooldown
     combat-cooldown-multiplier: 2.0
     
     # Completely block ender pearl usage during combat
     # true = Can't use pearls in combat | false = Can use with cooldown
     block-usage: false

   # Golden apple restrictions
   golden-apple:
     # If TRUE then you would have some restrictions in combat
     enabled: true
     # Cooldown after eating golden apple (seconds)
     cooldown: 3
     # Apply cooldown outside of combat
     cooldown-outside-combat: false
     # Cooldown multiplier during combat
     combat-cooldown-multiplier: 1.5
     # Prevent usage entirely during combat
     block-usage: false

   # Enchanted golden apple restrictions
   enchanted-golden-apple:
     # If TRUE then you would have some restrictions in combat
     enabled: true
     # Cooldown after eating enchanted golden apple (seconds)
     cooldown: 8
     # Apply cooldown outside of combat
     cooldown-outside-combat: false
     # Cooldown multiplier during combat
     combat-cooldown-multiplier: 2.0
     # Prevent usage entirely during combat
     block-usage: false

   # Elytra restrictions
   elytra:
     # If TRUE then you cannot use elytra in combat
     enabled: true
     # Prevent glide activation during combat
     block-glide: true
     # Prevent rocket boosting during combat
     block-boosting: true
     # Prevent takeoff during combat
     block-takeoff: true
     # Allow falling below certain height
     min-safe-height: 10
     # Boost cooldown during combat (seconds)
     boost-cooldown: 30
     # Altitude-based restrictions per world
     worlds:
       # Example: world_nether: {min-safe-height: 20, block-glide: false}
     # Time-based restrictions
     time-restrictions:
       # Block during night time (18000-6000 ticks)
       block-at-night: false
       # Block during day time (6000-18000 ticks)
       block-at-day: false

   # Trident restrictions
   trident:
     # Enable trident restrictions during combat
     enabled: true
     # Block trident throwing during combat
     block-throwing: true
     # Block riptide enchantment usage during combat
     block-riptide: true
     # Cooldown after throwing trident (seconds)
     cooldown: 5
     # Cooldown multiplier during combat
     combat-cooldown-multiplier: 2.0

   # End Crystal restrictions
   crystal:
     # Enable end crystal restrictions during combat
     enabled: true
     # Block end crystal placement during combat
     block-placement: true
     # Block end crystal breaking during combat (prevents crystal pvp)
     block-breaking: false
     # Damage radius to check for combat interference (blocks)
     damage-radius: 6

   # Respawn Anchor restrictions
   respawn-anchor:
     # Enable respawn anchor restrictions during combat
     # true = Players cannot use respawn anchors in combat
     # false = Players can use respawn anchors in combat
     enabled: true
     # Message when respawn anchor usage is blocked
     blocked-message: "&cYou cannot use Respawn Anchors during combat!"

   # Teleport restrictions
   teleport:
     enabled: true
     # Commands that trigger teleport check (without the leading slash)
     blocked-commands:
       - "tp"
       - "teleport"
       - "warp"
       - "home"
       - "spawn"
       - "warps"
       - "tpa"
       - "tpaccept"
       - "back"
       - "wild"
       - "rtp"
     # Message when teleport is blocked
     blocked-message: "&cYou cannot use teleport commands during combat!"
   
   # Safe zone restrictions
   safezone:
     # Prevent players from entering safe zones during combat
     enabled: true
     # Block entry to WorldGuard regions with specific flags
     block-entry: true
     # Regions to check (WorldGuard region names)
     protected-regions:
       - "spawn"
       - "safezone"
       - "safe"
     # Message when entry is blocked
     blocked-message: "&cYou cannot enter a safe zone while in combat!"
     # Visual barrier settings
     barrier:
       # Enable visual barrier rendering
       enabled: true
       # Material to use for barrier (GLASS, RED_STAINED_GLASS, BARRIER, etc.)
       material: "GLASS"
       # Height of barrier wall (blocks)
       height: 4
       # Width of barrier wall (blocks)
       width: 5
       # How long barrier stays visible (ticks, 20 ticks = 1 second)
       duration-ticks: 6
       # Minimum time between barrier renders (milliseconds)
       render-cooldown-ms: 50

   # Block interaction restrictions
   blocks:
     enabled: false
     # Prevent block breaking during combat
     block-breaking: false
     # Prevent block placing during combat
     block-placing: false

# Visual Settings
visual:
   # Theme settings
   themes:
     # Default theme selection
     default-theme: "clean"
     # Allow custom themes from config
     allow-custom: true
     # Available themes
     available:
       - "minimal"
       - "fire"
       - "ice"
       - "neon"
       - "dark"
       - "clean"

   # Animation settings
   animations:
     enabled: true
     theme-transition-duration: 20  # ticks
     theme-transition-steps: 5

   # Bossbar settings
   bossbar:
     enabled: true
     update-interval: 1  # seconds
     # Default formats with HEX color support and placeholders
     formats:
       default: "&cCombat Timer: &f{time_left}s"
       minimal: "&7{time_left}"
       fire: "&cüî• &f{time_left}s &cüî•"
       ice: "&b‚ùÑ &f{time_left}s &b‚ùÑ"
       neon: "&d‚ú® &f{time_left}s &d‚ú®"
       dark: "&8{time_left}s"
       clean: "&aCombat: &f{time_left}s"
     # Custom bossbar configurations
     custom:
       # Example: custom_theme: {color: "RED", style: "SOLID"}

   # Action bar messages
   actionbar:
     enabled: true
     # Show opponent name
     show-opponent: true
     # Update interval (ticks)
     update-interval: 20
     # Default formats with HEX color support and placeholders
     formats:
       default: "&cCombat with &f{opponent} &c- &f{time_left}s"
       minimal: "&7Combat - {time_left}s"
       detailed: "&c[COMBAT] &fFighting &e{opponent} &f- &a{time_left}s &fremaining"
       funny: "&d‚öî &eLOL! &fFighting &b{opponent} &f- &c{time_left}s ‚öî"
       medieval: "&6[&4BATTLE&6] &fvs &c{opponent} &f- &e{time_left}s"
       competitive: "&c[&4RANKED&c] &fvs &4{opponent} &f- &c{time_left}s"

   # Sound profiles
   sounds:
     enabled: true
     # Default sound profile
     profile: "default"
     # Sound profiles with theme-based audio cues
     profiles:
       default:
         events:
           combat_start:
             sound: "BLOCK_ANVIL_LAND"
             volume: 1.0
             pitch: 1.0
           combat_end:
             sound: "ENTITY_EXPERIENCE_ORB_PICKUP"
             volume: 1.0
             pitch: 1.0
           timer_warning:
             sound: "BLOCK_NOTE_BLOCK_PLING"
             volume: 1.0
             pitch: 2.0
           timer_reset:
             sound: "BLOCK_LEVER_CLICK"
             volume: 0.5
             pitch: 1.5
           interference:
             sound: "ENTITY_VILLAGER_NO"
             volume: 1.0
             pitch: 1.0
       subtle:
         events:
           combat_start:
             sound: "BLOCK_STONE_BUTTON_CLICK_ON"
             volume: 0.7
             pitch: 1.2
           combat_end:
             sound: "ENTITY_ITEM_PICKUP"
             volume: 0.5
             pitch: 1.0
           timer_warning:
             sound: "BLOCK_BAMBOO_BREAK"
             volume: 0.6
             pitch: 1.8
           timer_reset:
             sound: "BLOCK_STONE_BUTTON_CLICK_OFF"
             volume: 0.4
             pitch: 1.0
           interference:
             sound: "BLOCK_ANVIL_BREAK"
             volume: 0.3
             pitch: 0.8
       intense:
         events:
           combat_start:
             sound: "ENTITY_WITHER_SPAWN"
             volume: 1.5
             pitch: 0.8
           combat_end:
             sound: "ENTITY_GENERIC_EXPLODE"
             volume: 1.2
             pitch: 1.0
           timer_warning:
             sound: "ENTITY_ENDER_DRAGON_GROWL"
             volume: 1.0
             pitch: 0.5
           timer_reset:
             sound: "ENTITY_IRON_GOLEM_HURT"
             volume: 1.0
             pitch: 0.7
           interference:
             sound: "ENTITY_BLAZE_DEATH"
             volume: 1.0
             pitch: 1.0
       calm:
         events:
           combat_start:
             sound: "BLOCK_ENCHANTMENT_TABLE_USE"
             volume: 0.8
             pitch: 1.5
           combat_end:
             sound: "ENTITY_ITEM_PICKUP"
             volume: 0.6
             pitch: 2.0
           timer_warning:
             sound: "BLOCK_BELL_USE"
             volume: 0.7
             pitch: 1.2
           timer_reset:
             sound: "BLOCK_CONDUIT_ACTIVATE"
             volume: 0.5
             pitch: 1.8
           interference:
             sound: "ENTITY_VILLAGER_TRADE"
             volume: 0.4
             pitch: 0.6
       electronic:
         events:
           combat_start:
             sound: "BLOCK_BEACON_ACTIVATE"
             volume: 1.0
             pitch: 1.5
           combat_end:
             sound: "BLOCK_BEACON_DEACTIVATE"
             volume: 0.8
             pitch: 0.8
           timer_warning:
             sound: "BLOCK_REDSTONE_TORCH_BURNOUT"
             volume: 1.0
             pitch: 2.0
           timer_reset:
             sound: "BLOCK_COMPARATOR_CLICK"
             volume: 0.6
             pitch: 1.0
           interference:
             sound: "BLOCK_ANVIL_BREAK"
             volume: 0.8
             pitch: 1.2
       clean:
         events:
           combat_start:
             sound: "UI_BUTTON_CLICK"
             volume: 0.8
             pitch: 1.0
           combat_end:
             sound: "UI_TOAST_IN"
             volume: 0.7
             pitch: 1.2
           timer_warning:
             sound: "UI_TOAST_CHALLENGE_COMPLETE"
             volume: 0.9
             pitch: 1.5
           timer_reset:
             sound: "UI_BUTTON_CLICK"
             volume: 0.5
             pitch: 0.8
           interference:
             sound: "UI_TOAST_OUT"
             volume: 0.6
             pitch: 0.5

   # Message styles
   messages:
     # Default message style
     default-style: "minimal"
     # Custom message format strings
     formats:
       minimal: "&7{time_left}s remaining"
       detailed: "&cCombat with &f{opponent}&c - &f{time_left}s &cleft &f(Health: &a{health}&f/&a{max_health}&f)"
       funny: "&d‚öî &eGet rekt &b{opponent}&e! &c{time_left}s &eleft! ‚öî"
       medieval: "&6[&4BATTLE&6] &fThou fighteth &c{opponent} &f- &e{time_left} &fseconds remaineth"
       competitive: "&c[&4RANKED&c] &fElite duel vs &4{opponent} &f- &c{time_left}s"

# Performance Settings
performance:
  # Lag-aware combat adjustments
  lag:
    # Enable lag-aware timer adjustments
    enabled: true
    # TPS threshold for lag detection (below this = lag)
    tps-threshold: 18.0
    # Ping threshold for player lag detection (ms)
    ping-threshold: 200
    # Base number of seconds to extend timers during lag
    base-extension-seconds: 5
    # Extension multiplier based on lag severity
    extension-multiplier: 1.5
    # How often to update ping data (milliseconds)
    ping-update-interval-ms: 1000
    # How long to keep ping data for inactive players (milliseconds)
    ping-cleanup-threshold-ms: 300000
    # TPS history length for averaging (samples)
    tps-history-length: 60
    # Cleanup interval for lag adjustments (ticks)
    cleanup-interval-ticks: 1200

  # Async task settings
  async:
    enabled: true
    # Thread pool size
    thread-pool-size: 4

  # Caching settings
  cache:
    # Player data TTL (minutes)
    player-data-ttl: 30
    # Session cleanup interval (seconds)
    cleanup-interval: 60

  # Maximum event buffer size
  max-event-buffer: 1000

# Integration Settings
integration:
  placeholderapi:
    enabled: true

  # Cross-server combat sync settings (for BungeeCord/Velocity)
  cross-server-sync:
    enabled: false
    # Platform selection (BUNGEE, VELOCITY, AUTO)
    platform: "AUTO"
    # Sync channel name
    channel: "pvpcombat:sync"
    # Broadcast notifications
    broadcast:
      enabled: false
      format: "&6[Network] &e{attacker} &fis now in combat with &e{defender} &fon &b{server}"
    # Server switching prevention
    prevent-server-switch:
      enabled: true
      message: "&cCannot switch servers while in combat! Time remaining: {time}s"
    # Sync intervals (seconds)
    sync-interval: 30
    # Network timeout (seconds)
    timeout: 5
    # Connection pooling
    connection-pool:
      enabled: true
      max-connections: 10
      idle-timeout: 300

  # Legacy network settings (deprecated, use cross-server-sync instead)
  network:
    enabled: false
    # Server identifier
    server-id: "server1"

# Logging Settings
logging:
  enabled: true
  # Log level (INFO, DEBUG, WARNING)
  level: "INFO"
  # Maximum log files to keep
  max-files: 5
  # File size limit (MB)
  max-size-mb: 10

  # Combat logging configuration
  combat:
    # Enable detailed combat logging
    detailed:
      enabled: true
    # Storage type (FILE, MEMORY, BOTH)
    storage:
      type: "BOTH"
    # Summary delivery method (CHAT, GUI, STORAGE, NONE)
    summary:
      delivery: "CHAT"
    # Log retention period (days)
    retention:
      days: 30
    # Maximum entries in memory (for MEMORY/BOTH storage)
    memory:
      max-entries: 10000
    # Statistics to include in summaries
    include-stats:
      - "hits_landed"
      - "damage_dealt"
      - "accuracy"
      - "knockback_exchanges"
      - "combat_duration"

# Anti-cheat Settings
anticheat:
  # Interference detection - prevents third parties from interfering in 1v1 fights
  interference:
    # Enable interference detection
    enabled: true
    
    # Block interfering hits (true = cancel damage, false = notify only)
    block-hits: true
    
    # Maximum allowed third-party damage during combat (%)
    max-interference-percentage: 10.0
    
    # Time window for interference check (seconds)
    interference-window: 5
    
    # Action bar message format
    # Placeholders: {interferer}, {target}, {opponent}
    message: "&c{interferer} cannot interfere: &f{target} &cis already in combat with &f{opponent}!"
    
    # Sound effects for interference
    sound:
      enabled: true
      sound: "ENTITY_VILLAGER_NO"
      volume: 1.0
      pitch: 1.0
    
    # Per-world settings (override global if specified)
    worlds:
      # Example: world_nether: {enabled: false, block-hits: false}

# Statistics Settings
statistics:
  enabled: true
  # Track detailed hit data
  track-hits: true
  # Save interval (minutes)
  save-interval: 5
  # Maximum replay events per session
  max-replay-events: 500

# Replay System Settings
replay:
  # Enable combat replay system (DISABLED - Not yet ready for production)
  enabled: false
  # Storage format (MEMORY, COMPRESSED_FILE, HYBRID)
  storage:
    format: "HYBRID"
  # Timeline settings
  timeline:
    # Timeline buffer capacity (events per session)
    capacity: 1000
    # Maximum age for timeline events (seconds)
    max_age_seconds: 600
  # Cache settings
  cache:
    # Maximum age for cached replays (minutes)
    max_age_minutes: 30
  # Access control
  access:
    # Admin-only access to replay commands
    admin_only: true
    # Allowed admin players (UUIDs or names)
    allowed_admins:
      - "admin-player-uuid"
      - "admin-player-name"
  # GUI settings
  gui:
    # Enable GUI replay interface
    enabled: true
    # Maximum events to display per page
    page_size: 50
    # Auto-play settings
    autoplay:
      enabled: false
      # Speed multiplier (1.0 = real-time)
      speed: 1.0
      # Interval between events (ticks)
      interval: 4